webpackJsonp([93],{KTSt:function(t,e){},RTbF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("PeA4"),n=(i("vMJZ"),{name:"ConfirmTicket",mixins:[s.a],data:function(){return{realname:"",tel:"",paymodel:"",ticket_num:1,currentTickets:-1,vouceherList:[],vouceher:-1,vouceherValue:0,discount:{}}},methods:{payNow:function(){if(this.$showPay({id:this.$route.params.id,price:this.totalMoney,type:"activity",couponid:-1!=this.vouceher?this.vouceherList[this.vouceher].id:"",json:{id:this.$route.query.id},url:location.href.split("#")[0]+"#/activity/"+this.$route.params.id+"/payresult?id="+this.$route.query.id}),0==this.totalMoney){var t=this.$route.params.id,e=this.$route.query.id;this.$router.push("/activity/"+t+"/payresult?payResult=true&id="+e+"&ticketIndex="+this.currentTickets)}},vouceherChange:function(){var t=this.vouceher;this.vouceherValue=-1!=t?parseInt(this.vouceherList[t].money):0}},computed:{totalMoney:function(){var t=void 0;return 0==this.paymodel?(t=this.courseInfo.json.content.ticket_info[this.currentTickets].cash_deposit*this.ticket_num-this.vouceherValue)>0?t.toFixed(2):0:"1"==this.paymodel&&0==this.courseInfo.json.setting.is_pledge?(t=this.courseInfo.json.content.ticket_info[this.currentTickets].price*this.ticket_num-this.vouceherValue)>0?t.toFixed(2):0:"1"==this.paymodel&&1==this.courseInfo.json.setting.is_pledge?(t=(1==this.courseInfo.json.content.ticket_info[this.currentTickets].chargetype?+this.courseInfo.json.content.ticket_info[this.currentTickets].price+ +this.courseInfo.json.content.ticket_info[this.currentTickets].cash_deposit:+this.courseInfo.json.content.ticket_info[this.currentTickets].cash_deposit)*this.ticket_num-this.vouceherValue)>0?t.toFixed(2):0:void 0}}}),c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loading?i("div",[i("div",{staticClass:"ks-line activity-info"},[i("img",{staticClass:"activity-cover",attrs:{src:t.courseInfo.defaultpic}}),t._v(" "),i("div",{staticClass:"activity-info__content"},[i("div",{staticClass:"title"},[t._v("课程活动: "+t._s(t.courseInfo.title))]),t._v(" "),i("div",{staticClass:"count-price"},[i("div",{staticClass:"count"},[t._v(t._s(t.formatTimestamp(t.courseInfo.json.content.ticket_info[t.currentTickets].order_date[0],"style3")))]),t._v(" "),i("div",{staticClass:"price"},[t._v("￥ "+t._s(t.getMinPrice)+"起")])])])]),t._v(" "),i("div",{staticClass:"ks-line activity-row user-info"},[i("span",[t._v(t._s(t.realname))]),t._v(" "),i("span",[t._v(t._s(t.tel))])]),t._v(" "),"1"==t.paymodel?i("div",{staticClass:"ks-line activity-row"},[i("span",[t._v(t._s(t.courseInfo.json.content.ticket_info[t.currentTickets].title))]),t._v(" "),i("span",{staticClass:"price"},[t._v("￥ "+t._s(1==t.courseInfo.json.content.ticket_info[t.currentTickets].chargetype?t.courseInfo.json.content.ticket_info[t.currentTickets].price:0)+" "+t._s(t.ticket_num>1?" * "+ +t.ticket_num+"张":""))])]):t._e(),t._v(" "),1==t.courseInfo.json.setting.is_pledge?i("div",{staticClass:"ks-line activity-row"},[t._m(0),t._v(" "),i("span",{staticClass:"price"},[t._v("￥ "+t._s(t.courseInfo.json.content.ticket_info[t.currentTickets].cash_deposit)+" "+t._s(t.ticket_num>1?" * "+ +t.ticket_num+"张":""))])]):t._e(),t._v(" "),i("div",{staticClass:"ks-line activity-row"},[i("span",[t._v("可用优惠券")]),t._v(" "),t.vouceherList&&t.vouceherList.length?i("div",{staticStyle:{width:"100px","text-align":"right"}},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.vouceher,expression:"vouceher"}],staticClass:"activity-row-vouceher",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.vouceher=e.target.multiple?i:i[0]},t.vouceherChange]}},[i("option",{attrs:{value:"-1"}},[t._v("选择优惠券")]),t._v(" "),t._l(t.vouceherList,function(e,s){return i("option",{key:s,domProps:{value:s}},[t._v(t._s(parseInt(e.money))+"元优惠券")])})],2)]):i("span",[t._v("暂无可用优惠券")])]),t._v(" "),i("div",{staticClass:"ks-line activity-row"},[i("span",[t._v("总计金额")]),t._v(" "),i("span",{staticClass:"price"},[t._v("￥ "+t._s(t.totalMoney))])]),t._v(" "),i("div",{staticClass:"placeholder"}),t._v(" "),i("ks-button",{staticClass:"pay-btn",attrs:{type:"primary",width:"100%"},on:{click:t.payNow}},[t._v("立即支付")])],1):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("\n      预付保证金\n      "),e("span",{staticClass:"gray"},[this._v("( 签到后可线下退 )")])])}]};var o=i("C7Lr")(n,c,!1,function(t){i("KTSt")},"data-v-27cfd8b4",null);e.default=o.exports}});