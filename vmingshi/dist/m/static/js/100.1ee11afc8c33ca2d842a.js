webpackJsonp([100],{"Akn/":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("6L+O"),a=e("h0S9"),r=e("vMJZ"),o={name:"confirm",data:function(){return{vipdiscount:{},vouceherList:[],vouceher:-1,vouceherValue:0,json:{mark:""},date:[],list:{realname:"请添加收货地址",province:"你还没添加任何地址，点击添加",city:"",area:"",street:"",id:"0"},sumto:"",all_price:"",num:"",index:0,commodityId:"",freight:"",flag:!1}},methods:{onClickpresent:function(){var t=this,s=void 0;if(this.json.mark.length>20)return this.$toast("备注最多自能填写20个字","success");s=1==this.$route.query.type?{id:this.$route.query.id,type:"14",couponid:-1!=this.vouceher?this.vouceherList[this.vouceher].id:"",json:{mark:this.json.mark,attr_id:this.$route.query.attr_id,num:this.$route.query.num,address_id:this.list.id}}:{couponid:-1!=this.vouceher?this.vouceherList[this.vouceher].id:"",type:"15",json:{mark:this.json.mark,address_id:this.list.id,cart_id:this.$route.query.id.split(",")}},Object(a.h)(s).then(function(s){t.flag=!0,location.href=s.url,setTimeout(function(){t.flag=!1},5e3)})},siteset:function(){""==this.list?this.$router.push("/editaddress"):this.$router.push("/shipping")},vouceherChange:function(){var t=this.vouceher;this.vouceherValue=-1!=t?parseInt(this.vouceherList[t].money):0}},activated:function(){var t=this,s=void 0;s=1==this.$route.query.type?{type:this.$route.query.type,num:this.$route.query.num,id:this.$route.query.id,attr_id:this.$route.query.attr_id}:{type:2,cart_id:this.$route.query.id.split(",")},Object(i.d)(s).then(function(e){"请求出错"==e.msg&&t.$router.push("/cart"),1==s.type?(t.date=[e.data],t.commodityId=t.$route.query.id):(t.date=e.data,e.length&&(1==e.data.length?t.commodityId=e.data[0].goodsid:t.commodityId="")),t.freight=e.freight,t.num=e.num;var i=e.all_price;Object(r.z)({type:14,all_price:i,id:t.commodityId}).then(function(s){(s.resule="success")&&(t.vouceherList=s.list,t.vipdiscount=s.vipdiscount,s.vipdiscount.discount?t.all_price=i*t.vipdiscount.discount/10:t.all_price=i)})}),Object(i.b)().then(function(s){var e=sessionStorage.getItem("index");void 0==e&&(e=0),""!=s.list?t.list=s.list[e]:0==s.list.length&&t.$confirm("请填写收货地址").then(function(){t.$router.push("/editaddress")})}),document.title="确认订单"}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"confirm"},[e("div",{staticClass:"ks-row confirm-site",on:{click:t.siteset}},[t._m(0),t._v(" "),e("div",{staticClass:"ks-col-19"},[e("div",{staticClass:"confirm-item"},[t._v(t._s(t.list.realname)+" "+t._s(t.list.telphone))]),t._v(" "),e("div",{staticClass:"confirm-size"},[t._v(t._s(t.list.province)+t._s(t.list.city)+t._s(t.list.area)+t._s(t.list.street))])]),t._v(" "),t._m(1)]),t._v(" "),t._l(t.date,function(s,i){return e("div",{key:i,staticClass:"ks-row order"},[e("div",{staticClass:"ks-col-7"},[e("ks-image",{staticStyle:{height:"95px"},attrs:{src:s.defaultpic}})],1),t._v(" "),e("div",{staticClass:"ks-col-17 order-right"},[e("div",{staticClass:"order-title"},[t._v(t._s(s.title))]),t._v(" "),s.json.date?e("a",{staticClass:"versions"},[t._v(t._s(s.json.date))]):t._e(),t._v(" "),e("div",{staticClass:"order-price"}),t._v(" "),e("div",{staticClass:"ks-row order-bottom"},[e("div",{staticClass:"ks-col-15"},[e("li",{staticClass:"ks-color-info"},[e("s",[t._v("￥"+t._s(s.json.uprice))])])]),t._v(" "),e("div",{staticClass:"ks-col-9"},[e("li",[e("span",[t._v("￥"+t._s(s.json.price))]),t._v(" "),e("a",[t._v("x"+t._s(s.num))])])])])])])}),t._v(" "),e("div",{staticClass:"coupon"},[t.vipdiscount=={}||t.vipdiscount&&1==t.vipdiscount.other?e("div",{staticClass:"ks-cell ks-cell--clickable"},[e("div",{staticClass:"ks-line activity-row"},[e("span",[t._v("优惠券")]),t._v(" "),t.vouceherList&&t.vouceherList.length?e("div",{staticStyle:{width:"100px","text-align":"right"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.vouceher,expression:"vouceher"}],staticClass:"activity-row-vouceher",on:{change:[function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.vouceher=s.target.multiple?e:e[0]},t.vouceherChange]}},[e("option",{attrs:{value:"-1"}},[t._v("选择优惠券")]),t._v(" "),t._l(t.vouceherList,function(s,i){return e("option",{key:i,domProps:{value:i}},[t._v(t._s(parseInt(s.money))+"元优惠券")])})],2)]):e("span",[t._v("  暂无可用优惠券")])])]):t._e(),t._v(" "),e("div",{staticClass:"coupon-bottom",staticStyle:{lineHeight:"15px"}},[t._v("\n        买家留言\n        "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.json.mark,expression:"json.mark"}],staticClass:"control",attrs:{placeholder:"选填，对本次交易的说明"},domProps:{value:t.json.mark},on:{input:function(s){s.target.composing||t.$set(t.json,"mark",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"expressage"},[t._v("快递费："),e("span",[t._v("￥"+t._s(t.freight))])])]),t._v(" "),e("store-footer")],2),t._v(" "),e("div",{staticClass:"cart-btn"},[e("span",{staticClass:"ks-fr"},[e("span",{staticClass:"cart-btn__freight"},[t._v("共计"+t._s(t.num)+"件")]),t._v(" "),e("span",{staticClass:"cart-total"},[t._v("合计：")]),t._v(" "),e("span",{staticClass:"cart-sum"},[t._v("￥\n          "),t.all_price-t.vouceherValue<=0?e("a",{staticClass:"cart-sum"},[t._v("0")]):t._e(),t._v(" "),t.all_price-t.vouceherValue>0?e("a",{staticClass:"cart-sum"},[t._v(t._s((t.all_price-t.vouceherValue).toFixed(2)))]):t._e()]),t._v(" "),e("ks-button",{ref:"tjbtn",staticClass:"ks-fr",staticStyle:{height:"38px",lineHeight:"30px",marginLeft:"10px"},attrs:{type:"primary",disabled:t.flag},on:{click:t.onClickpresent}},[t._v("提交订单")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"ks-col-3"},[s("i",{staticClass:"ks-icon ks-icon-pin-outline"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"ks-col-2"},[s("i",{staticClass:"ks-icon ks-icon-chevron-right-outline"})])}]};var n=e("C7Lr")(o,c,!1,function(t){e("wifJ")},"data-v-144835ac",null);s.default=n.exports},wifJ:function(t,s){}});