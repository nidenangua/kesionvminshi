webpackJsonp([54],{RFit:function(e,t){},TCof:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("BXtI"),s={name:"RegistrationForm",mixins:[o("PeA4").a],methods:{nextStep:function(){var e=this;console.log(this.courseInfo);var t=this.courseInfo.json.form[1].content;if(this.courseInfo.json.form[0].content.length<=0)return this.$toast("请输入姓名"),this.$refs.formInput0[0].focus(),!1;if(!/^1[3456789]\d{9}$/.test(t))return this.$toast("手机号不正确"),this.$refs.formInput1[0].focus(),!1;for(var o=0;o<this.courseInfo.json.form.length;o++)if(1==this.courseInfo.json.form[o].required&&this.courseInfo.json.form[o].content.length<=0)return this.$toast("请输入"+this.courseInfo.json.form[o].name),this.$refs["formInput"+o][0].focus(),!1;var s=this.$route.query.ticketIndex,n={courseid:this.$route.params.id,mobile:this.courseInfo.json.form[1].content,json:{ticketid:this.courseInfo.json.content.ticket_info[s].ticketid,num:this.$route.query.num,paymodel:this.$route.query.paymodel,form:this.courseInfo.json.form}};Object(r.c)(n).then(function(t){"success"==t.result&&(0==e.courseInfo.json.content.ticket_info[s].chargetype?0==e.courseInfo.json.setting.is_pledge?e.$router.push({name:"PayResult",params:{status:t.status},query:{payResult:!0,id:t.id,status:t.status,ticketIndex:e.$route.query.ticketIndex}}):e.$router.push({name:"ConfirmTicket",params:{id:e.$route.params.id},query:{realname:e.courseInfo.json.form[0].content,tel:e.courseInfo.json.form[1].content,id:t.id,num:e.$route.query.num,paymodel:e.$route.query.paymodel,ticketid:e.courseInfo.json.content.ticket_info[s].ticketid,ticketIndex:e.$route.query.ticketIndex}}):e.$router.push({name:"ConfirmTicket",params:{id:e.$route.params.id,status:t.status},query:{realname:e.courseInfo.json.form[0].content,tel:e.courseInfo.json.form[1].content,id:t.id,num:e.$route.query.num,paymodel:e.$route.query.paymodel,ticketid:e.courseInfo.json.content.ticket_info[s].ticketid,ticketIndex:e.$route.query.ticketIndex}}))})}}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.loading?o("div",{staticClass:"ks-pt10 registration-form"},[e._l(e.courseInfo.json.form,function(t,r){return o("div",{key:r,staticClass:"ks-fz14 form-row"},[t.name?[o("div",{staticClass:"title"},[o("span",[e._v(e._s(t.name))]),e._v(" "),1==t.required?o("span",{staticClass:"required"},[e._v("(必填)")]):e._e()]),e._v(" "),"text"==t.type?o("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"item.content"}],ref:"formInput"+r,refInFor:!0,staticClass:"ks-mt10 ks-fz14 form-input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.content},on:{input:function(o){o.target.composing||e.$set(t,"content",o.target.value)}}}):"textarea"==t.type?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"item.content"}],staticClass:"form-textarea",attrs:{placeholder:t.placeholder},domProps:{value:t.content},on:{input:function(o){o.target.composing||e.$set(t,"content",o.target.value)}}}):"radio"==t.type?o("div",e._l(t.content,function(r,s){return o("ks-radio",{key:s,attrs:{label:r},model:{value:t.select,callback:function(o){e.$set(t,"select",o)},expression:"item.select"}},[e._v(e._s(r))])}),1):"checkbox"==t.type?o("div",e._l(t.content,function(r,s){return o("div",{key:s,staticClass:"form-checkbox-row"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.selectCheckArr,expression:"item.selectCheckArr"}],staticClass:"form-checkbox",attrs:{type:"checkbox",id:r},domProps:{value:r,checked:Array.isArray(t.selectCheckArr)?e._i(t.selectCheckArr,r)>-1:t.selectCheckArr},on:{change:function(o){var s=t.selectCheckArr,n=o.target,c=!!n.checked;if(Array.isArray(s)){var i=r,a=e._i(s,i);n.checked?a<0&&e.$set(t,"selectCheckArr",s.concat([i])):a>-1&&e.$set(t,"selectCheckArr",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(t,"selectCheckArr",c)}}}),e._v(" "),o("label",{attrs:{for:r}},[e._v(e._s(r))])])}),0):e._e()]:e._e()],2)}),e._v(" "),o("div",{staticClass:"placeholder"}),e._v(" "),o("ks-button",{staticClass:"next-step",attrs:{type:"primary",width:"100%"},on:{click:e.nextStep}},[e._v("下一步")])],2):e._e()},staticRenderFns:[]};var c=o("C7Lr")(s,n,!1,function(e){o("RFit")},"data-v-b0bf596e",null);t.default=c.exports}});