webpackJsonp([73],{cEXj:function(e,s){},hlsv:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=t("0xDb"),o=t("vMJZ"),n={name:"UserReg",data:function(){return{second:-1,mobile:"",code:"",nickname:"",password:"",repassword:""}},methods:{reg:function(){var e=this;if(!this.nickname)return this.$msg("请输入昵称"),void this.$refs.nickname.focus();if(this.verifyPhone()){if(this.code)return this.password?this.repassword?void(this.password===this.repassword?Object(o.L)({mobile:this.mobile,code:this.code,nickname:this.nickname,password:this.password,repassword:this.repassword,inviter:this.$route.query.inviter}).then(function(s){"success"===s.result?e.$store.ready(function(s){e.$msg("注册成功","success"),s.is_rlogon?Object(o.f)({username:e.mobile,password:e.password}).then(function(s){e.$store.dispatch("updateUserInfo").then(function(){e.$router.push("/user")})}):e.$router.push("/user/login")}):e.$msg(s.msg)}):this.$msg("两次输入的密码不一致")):(this.$msg("请再次输入登录密码"),void this.$refs.repassword.focus()):(this.$msg("请输入登录密码"),void this.$refs.password.focus());this.$msg("请输入验证码")}},verifyPhone:function(){return this.mobile?this.mobile.length<11?(this.$msg("请输入11位手机号"),this.$refs.mobile.focus(),!1):!!Object(i.i)(this.mobile)||(this.$msg("请输入有效的手机号"),this.$refs.mobile.focus(),!1):(this.$msg("请输入手机号"),this.$refs.mobile.focus(),!1)},getCode:function(){var e=this;this.timer||this.verifyPhone()&&Object(o.P)({mobile:this.mobile,type:5}).then(function(s){"success"===s.result&&(e.second=60,e.timer=setInterval(function(){e.second--,0==e.second&&(clearInterval(e.timer),e.timer=null)},1e3))})}}},r={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"login"},[t("div",{staticClass:"title"},[e._v("用户注册")]),e._v(" "),t("ks-field",{ref:"nickname",attrs:{line:"",maxlength:"20",placeholder:"请输入昵称"},model:{value:e.nickname,callback:function(s){e.nickname=s},expression:"nickname"}}),e._v(" "),t("ks-field",{ref:"mobile",attrs:{line:"",type:"number",maxlength:"11",placeholder:"请输入手机号码"},model:{value:e.mobile,callback:function(s){e.mobile=s},expression:"mobile"}}),e._v(" "),t("ks-field",{ref:"code",attrs:{line:"",maxlength:"6",placeholder:"请输入验证码"},model:{value:e.code,callback:function(s){e.code=s},expression:"code"}},[t("ks-button",{staticClass:"getcode",attrs:{slot:"button",plain:"",size:"mini",disabled:e.second>0},on:{click:e.getCode},slot:"button"},[e._v("\n                "+e._s((-1==e.second?"获取验证码":0==e.second&&"重新获取")||e.second>0&&e.second+"秒后重新获取")+"\n            ")])],1),e._v(" "),t("ks-field",{ref:"password",attrs:{line:"",type:"password",maxlength:"20",placeholder:"请输入登录密码"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),e._v(" "),t("ks-field",{ref:"repassword",attrs:{type:"password",maxlength:"20",placeholder:"请再次输入登录密码"},model:{value:e.repassword,callback:function(s){e.repassword=s},expression:"repassword"}})],1),e._v(" "),t("div",{staticClass:"buttons"},[t("ks-button",{attrs:{type:"primary"},on:{click:e.reg}},[e._v("确认注册")])],1),e._v(" "),t("div",{staticClass:"buttons"},[t("ks-button",{on:{click:function(s){return e.$router.push("/user/login")}}},[e._v("返回登录")])],1),e._v(" "),t("store-footer")],1)},staticRenderFns:[]};var a=t("C7Lr")(n,r,!1,function(e){t("cEXj")},"data-v-6e7203dc",null);s.default=a.exports}});