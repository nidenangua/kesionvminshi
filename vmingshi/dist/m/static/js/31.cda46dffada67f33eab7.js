webpackJsonp([31],{"1dtd":function(t,i){},KKgP:function(t,i){},jCwM:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("Ty/O"),c={name:"activitySelect",components:{acitvityTickets:e("DKcD").default},props:{id:"",activitytime:"",payway:[Number,String],is_pledge:[Number,String]},data:function(){return{ticketmsg:[],show:!1,index:"",whether:"",ischarge:"",flag:!1,ticketid:""}},methods:{closeshow:function(){this.show=!1},close:function(t){var i=this;"editTicket"==t.action?this.$nextTick(function(){i.ticketmsg[i.index]=t.value.content.ticket_info[0]}):this.ticketmsg.push(t.content.ticket_info[0]),this.show=!1},establishNew:function(){var t=this;this.$actionSheet({list:[{name:"创建收费票",type:"1"},{name:"创建免费票",type:"0"}]}).then(function(i){t.index=-1,1==i.type?t.whether=1:t.whether=0,t.flag=!t.flag,t.show=!0})},tickedel:function(t){this.ticketmsg.splice(t,1)},compileTick:function(t,i,e){this.ticketid=e,this.ischarge=i,this.index=t,this.show=!0},getmsg:function(){var t=this,i=this.id;Object(s.d)({id:i}).then(function(i){t.ticketmsg=i.courseinfo.json.content.ticket_info,console.log(t.ticketmsg)})},goback:function(){this.$emit("activityCon",this.ticketmsg)}},created:function(){void 0!=this.$route.query.id&&this.getmsg()},watch:{id:function(){"issueActivity"==this.$route.name&&void 0!=this.$route.query.id&&this.getmsg()},$route:{handler:function(){void 0==this.$route.query.id&&"issueActivity"==this.$route.name&&(this.ticketmsg=[])}}}},n={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"course"},[0==t.ticketmsg.length?e("ks-empty",{attrs:{msg:"当前没有票种信息~"}}):t._e(),t._v(" "),e("div",{staticClass:"tickets"},t._l(t.ticketmsg,function(i,s){return e("div",{key:s,staticClass:"bigbox"},[e("div",{staticClass:"tickets-name"},[e("p",[t._v(t._s(i.title))])]),t._v(" "),e("div",{staticClass:"tickets-msg"},[e("div",{staticClass:"tickets-msg__name"},[t._v(t._s(0==i.chargetype?"免费票":"收费票")+" "),1==i.chargetype?e("span",[t._v("￥"+t._s(i.price))]):t._e()]),t._v(" "),e("div",{staticClass:"tickets-msg__num"},[t._v("票数"+t._s(i.num))])]),t._v(" "),e("div",{staticClass:"tickets-explain"},[t._v("票价说明："+t._s(i.explain))]),t._v(" "),e("div",{staticClass:"tickets-oper"},[e("ks-button",{staticClass:"ks-ml5",on:{click:function(i){return t.tickedel(s)}}},[t._v("删除")]),t._v(" "),e("ks-button",{staticClass:"ks-ml5",on:{click:function(e){return t.compileTick(s,i.chargetype,i.ticketid)}}},[t._v("编辑")])],1)])}),0),t._v(" "),e("div",{staticClass:"newcourse"},[e("ks-button",{attrs:{type:"white",width:"48%"},on:{click:t.establishNew}},[t._v("创建新票种")]),t._v(" "),e("ks-button",{attrs:{type:"success",width:"48%"},on:{click:t.goback}},[t._v("完成")])],1),t._v(" "),e("van-popup",{style:{width:"100%",height:"100%"},attrs:{position:"right",overlay:!1},model:{value:t.show,callback:function(i){t.show=i},expression:"show"}},[e("acitvity-tickets",{attrs:{ticketmsg:t.ticketmsg,ischarge:t.ischarge,flag:t.flag,index:t.index,whether:t.whether,activitytime:t.activitytime,payway:t.payway,pledge:t.is_pledge,ticketid:t.ticketid},on:{close:t.close,closeshow:t.closeshow}})],1)],1)},staticRenderFns:[]};var a=e("C7Lr")(c,n,!1,function(t){e("1dtd"),e("KKgP")},"data-v-de2b149e",null);i.default=a.exports}});