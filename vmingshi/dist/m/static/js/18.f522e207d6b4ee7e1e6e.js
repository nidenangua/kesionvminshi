webpackJsonp([18],{"1Xtt":function(t,i){},V9to:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("w8io"),s=e("dAT0"),c=e("g+M4"),n={name:"ExamResult",components:{PaperMedal:s.a,cavansPopups:a.a},data:function(){return{certificate:{share_title:"",title:"",json:{comment:""},cover:"",qrcode:""},loaded:!1,accuracy:0,iscorrect:0,answerSheet:[],id:0,type:0,correctscore:0,sumscore:0}},activated:function(){var t=this;document.title="",this.certificate.id="",this.answerSheet=[],this.id=this.$route.query.id,this.type=this.$route.query.type;Object(c.k)({answerid:this.id,type:this.type}).then(function(i){if("success"==i.result){if(document.title=i.detail.title,t.iscorrect=i.detail.iscorrect,t.accuracy=i.detail.accuracy,i.detail.certificate&&i.detail.certificate.id){var e=t.certificate;e.share_title=i.detail.certificate.share_title,e.title=i.detail.certificate.title,e.json.comment=i.detail.certificate.json.comment,e.cover=i.detail.certificate.cover,e.qrcode=i.detail.certificate.qrcode,e.id=i.detail.certificate.id,e.sumscore=i.detail.certificate.sumscore,e.info_title=i.detail.title}var a=[];i.detail.answer.map(function(t,e){t.tklist&&t.tklist.map(function(t){0==i.iscorrect&&(t.userscore>0?t.right=1:t.right=0),t.useranswer&&""!==t.useranswer.toString()?t.doing=1:t.doing=0,a.push(t)})}),t.answerSheet=a,t.sumscore=i.detail.sumscore}t.loaded=!0})},methods:{seeCertificate:function(){var t=this;this.$nextTick(function(){t.$refs.certificate.getcanvas()})},viewAnalysis:function(){this.$router.push({path:"/exam/analysis",query:{id:this.id,type:this.type}})},practice:function(){this.$router.push("/exam")}}},r={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return t.loaded?a("div",[1==t.type?a("paper-medal",{attrs:{value:1==t.iscorrect?t.sumscore:"",unit:1==t.iscorrect?"":"未批阅",name:"得分"}}):2==t.type?a("paper-medal",{attrs:{value:t.accuracy,unit:"%",name:"正确率"}}):t._e(),t._v(" "),t.certificate&&t.certificate.id?a("div",{staticClass:"certificate"},[a("div",[a("span",{staticClass:"certificate-left"},[a("img",{staticClass:"certificate-left__img",attrs:{src:e("gWa6"),alt:""}}),t._v("\n          获得"),a("span",{staticClass:"certificate-left__name"},[t._v(" "+t._s(t.certificate.title)+" ")]),t._v("证书\n        ")])]),t._v(" "),a("div",[a("span",{staticClass:"certificate-see",on:{click:t.seeCertificate}},[t._v("查看证书")])])]):t._e(),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"paper-contianer"},[t.answerSheet.length?a("div",{staticClass:"paper-answer"},t._l(t.answerSheet,function(i,e){return a("div",{key:e,staticClass:"paper-answer__item",class:{doing:1==i.doing,error:"wrong"==i.mark,right:"right"==i.mark}},[t._v(t._s(e+1)+"\n      ")])}),0):t._e()]),t._v(" "),a("div",{staticClass:"paper-submit-box"},[a("div",{staticClass:"paper-submit paper-submit--default",on:{click:function(i){return t.viewAnalysis()}}},[t._v("查看解析")]),t._v(" "),a("div",{staticClass:"paper-submit",on:{click:t.practice}},[t._v("返回练习主页")])]),t._v(" "),a("cavansPopups",{ref:"certificate",attrs:{info:t.certificate}})],1):t._e()},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"paper-opear clearfix"},[i("div",{staticClass:"paper-opear__right"},[i("div",{staticClass:"paper-icon-sign paper-icon-sign--color1"},[i("i"),this._v("已做\n      ")]),this._v(" "),i("div",{staticClass:"paper-icon-sign paper-icon-sign--color5"},[i("i"),this._v("正确\n      ")]),this._v(" "),i("div",{staticClass:"paper-icon-sign paper-icon-sign--color2"},[i("i"),this._v("错误\n      ")]),this._v(" "),i("div",{staticClass:"paper-icon-sign paper-icon-sign--color3"},[i("i"),this._v("未做\n      ")])])])}]};var o=e("C7Lr")(n,r,!1,function(t){e("1Xtt")},"data-v-4d4b3136",null);i.default=o.exports},gWa6:function(t,i,e){t.exports=e.p+"static/img/certificateImg.cbfe953.png"},lz9x:function(t,i){},w8io:function(t,i,e){"use strict";var a=e("iEin"),s={props:{info:Object},data:function(){return{flag:!1,canvasWidth:.88*window.innerWidth*4,canvasHeight:.88*window.innerWidth/.66*4,canImg:""}},methods:{getcanvas:function(){var t=this;this.$showLoading();var i=Math.ceil(1e7*Math.random()),e=this.$refs.myCanvas,s={ctx:e.getContext("2d"),width:this.canvasWidth,height:this.canvasHeight};a.a.init(s),a.a.drawImage(this.info.cover+"?"+i,{width:this.canvasWidth,height:this.canvasHeight,containerWidth:.8*this.canvasWidth}).then(function(){a.a.drawImage(t.$store.state.userInfo.headimg+"?"+i,{x:.406*t.canvasWidth,y:.262*t.canvasHeight,width:.187*t.canvasWidth,height:.11*t.canvasHeight,radius:40}).then(function(){a.a.drawImage(t.info.qrcode+"?"+i,{x:.164*t.canvasWidth,y:.76*t.canvasHeight,width:.22*t.canvasWidth,height:.22*t.canvasWidth}).then(function(){var i;i="/Public/app/images/certificate_bg2.png"==t.info.cover?"white":"black",a.a.fillText(t.info.title,{fontSize:72,padding:30,y:.235*t.canvasHeight,fillStyle:i}),a.a.fillText(t.$store.state.userInfo.nickname,{fontSize:64,padding:30,y:.425*t.canvasHeight,fillStyle:i}),a.a.fillText("在"+t.info.info_title+"获得了"+t.info.sumscore+"分",{fontSize:64,padding:30,y:.471*t.canvasHeight,fillStyle:i}),a.a.fillText(t.info.json.comment,{fontSize:64,padding:30,y:.606*t.canvasHeight,fillStyle:i}),a.a.fillText(t.info.share_title,{padding:30,x:.44*t.canvasWidth,y:.8*t.canvasHeight,fillStyle:i,fontSize:56}),a.a.fillText("长按保存二维码",{padding:30,x:.44*t.canvasWidth,y:.88*t.canvasHeight,fillStyle:"#bdbdb0",fontSize:56})}).then(function(){t.canImg=e.toDataURL("image/png"),t.flag=!0,t.$hideLoading()})})})}}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("van-overlay",{attrs:{show:t.flag},on:{click:function(i){t.flag=!1}}},[e("div",{staticClass:"Canvas"},[e("canvas",{ref:"myCanvas",staticClass:"canvas-can",attrs:{width:t.canvasWidth,height:t.canvasHeight}})]),t._v(" "),e("div",{staticClass:"canImg"},[t.canImg?e("img",{staticClass:"canImg-image",style:{width:t.canvasWidth/4+"px",height:t.canvasHeight/4+"px"},attrs:{src:t.canImg}}):t._e(),t._v(" "),e("p",{staticClass:"operation"},[t._v("长按保存图片，发微信好友或微信群")])])])],1)},staticRenderFns:[]};var n=e("C7Lr")(s,c,!1,function(t){e("lz9x")},"data-v-4d8b5407",null);i.a=n.exports}});