webpackJsonp([3],{"61XU":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("AorJ"),s=n("/Njs"),i={components:{MediaUpload:a.a},data:function(){return{show:!1,val:"",maxLength:144,info:[],type:""}},computed:{remnant:function(){return this.maxLength-this.val.length}},mounted:function(){},methods:{onMediaUploadChange:function(t){this.info=t.info,"image"==t.type?this.type="1":"video"==t.type?this.type="2":"audio"==t.type?this.type="3":this.type="0",0==this.info.length&&(this.type="0")},publish:function(){var t=this,e={type:this.type,content:this.val,info:this.info};console.log(e),Object(s.e)(e).then(function(e){"success"==e.result&&(t.$toast("发表成功","success"),t.val="",t.info=[],t.$navigateBack())}).catch()}},activated:function(){this.show=!0,document.title="发布朋友圈"},deactivated:function(){this.show=!1}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{style:{minHeight:t.maxLength+"px",background:"#fff"}},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"parents"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],staticClass:"ks-textarea",attrs:{maxlength:"144",autofocus:"true"},domProps:{value:t.val},on:{input:function(e){e.target.composing||(t.val=e.target.value)}}}),t._v(" "),n("span",{staticClass:"tips"},[n("span",{class:{remnant:0==t.remnant.length}},[t._v(t._s(t.val.length))]),t._v("/\n        "),n("span",{class:{remnant:0!=t.remnant.length}},[t._v(t._s(t.remnant))])])])]),t._v(" "),n("div",{staticClass:"add"},[n("Media-Upload",{on:{change:t.onMediaUploadChange}}),t._v(" "),n("div",{staticClass:"publish"},[n("ks-button",{attrs:{width:"100%",type:"primary"},on:{click:function(e){return t.publish()}}},[t._v("发表")])],1)],1)]):t._e()},staticRenderFns:[]};var c=n("C7Lr")(i,o,!1,function(t){n("aF78")},null,null);e.default=c.exports},aF78:function(t,e){}});