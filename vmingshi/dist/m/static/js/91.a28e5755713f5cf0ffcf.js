webpackJsonp([91],{QObk:function(s,t){},he9C:function(s,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=i("jm4A"),a=i("AorJ"),o=i("T4EX"),n={components:{MediaUpload:a.a,MediaPreview:o.a},data:function(){return{loaded:!1,usertype:0,is_me:"",minHeight:window.innerHeight,social:{adddate:"",head:"",inputer:"",reply_num:"",is_open:"true",title:"",status:"true",is_show:"true",json:{content:"",info:[]},id:"",type:"",content:"",info:[]}}},activated:function(){var s=this,t=this.$route.query.id;Object(e.g)({id:t}).then(function(t){s.is_me=t.is_me,s.resetJson(t.social_data.json),s.usertype=t.usertype,s.social=t.social_data,s.social.is_open=t.social_data.is_open,s.social.status=t.social_data.status,s.social.is_show=t.social_data.is_show,s.loaded=!0})},deactivated:function(){this.loaded=!1},methods:{delask:function(s,t){var i=this;this.$confirm("确定要删除该提问吗？").then(function(){var s={id:t,type:1};Object(e.d)(s).then(function(s){i.$router.push({path:"/MentoringAudit"})})})},resetJson:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(s.$info={},Number(s.type)){case 1:s.$type="image";var t=[];s.info instanceof Array&&s.info.map(function(s){t.push({src:s})}),s.$info={list:t};break;case 2:s.$type="video",s.$info={src:s.info[0]||""};break;case 3:s.$type="audio",s.$info={src:s.info[0]||""}}},onMediaUploadChange:function(s){this.social.info=s.info,"image"==s.type?this.social.type="1":"video"==s.type?this.social.type="2":"audio"==s.type?this.social.type="3":this.social.type="0"},publishh:function(){var s=this,t={id:this.social.id,type:this.social.type,info:this.social.info,content:this.social.content,is_open:this.social.is_open,status:this.social.status,is_show:this.social.is_show};Object(e.f)(t).then(function(t){"success"===t.result&&(s.$toast("回复成功","success"),s.$router.push({path:"/Mentoringaudit"}))})}}},c={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return s.loaded?e("div",{style:{minHeight:s.minHeight+"px",background:"#fff"}},[e("div",{staticClass:"mentoring"},[e("div",{staticClass:"mentoring-name"},[s._v(s._s(s.social.inputer))]),s._v(" "),e("p",{staticClass:"mentoring-time"},[s._v(s._s(s.social.adddate))]),s._v(" "),e("ks-image",{staticClass:"mentoring-head",attrs:{src:s.social.head}}),s._v(" "),e("p",{staticClass:"mentoring-content"},[s._v(s._s(s.social.title))]),s._v(" "),e("p",{staticClass:"mentoring-content mentoring-details"},[s._v(s._s(s.social.json.content))]),s._v(" "),e("media-preview",{attrs:{type:s.social.json.$type,info:s.social.json.$info}}),s._v(" "),e("div",{staticClass:"mentoring-tool"},[e("span",{staticClass:"mentoring-tool__delete"},[s._v(s._s(s.social.reply_num)+"人围观")]),s._v(" "),"2"===s.usertype||"1"==s.is_me||"1"===s.usertype?e("span",{staticClass:"mentoring-tool__like",on:{click:function(t){return s.delask(s.type,s.$route.query.id)}}},[e("img",{attrs:{src:i("6ec5")}})]):s._e()]),s._v(" "),e("div",[e("span",{staticClass:"ks-word ks-fl"},[s._v("是否前台展示")]),s._v(" "),e("ks-switch",{staticClass:"ks-fl",model:{value:s.social.is_show,callback:function(t){s.$set(s.social,"is_show",t)},expression:"social.is_show"}})],1),s._v(" "),e("div",{staticClass:"ks-word--lightgray ks-pt10"},[s._v("选择关闭，则该问题仅自己和老师可见")])],1),s._v(" "),e("div",{staticClass:"gridClass"}),s._v(" "),e("div",{staticClass:"mentoring-box"},[e("div",[e("ks-switch",{staticClass:"ks-fl",model:{value:s.social.status,callback:function(t){s.$set(s.social,"status",t)},expression:"social.status"}}),s._v(" "),e("span",{staticClass:"ks-word ks-fl"},[s._v("审核状态")])],1),s._v(" "),e("div",{staticClass:"ks-textarea ks-pt10 upboth"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:s.social.content,expression:"social.content"}],staticClass:"ks-textarea__inner",staticStyle:{height:"160px"},attrs:{autocomplete:"off",placeholder:"请输入回复内容"},domProps:{value:s.social.content},on:{input:function(t){t.target.composing||s.$set(s.social,"content",t.target.value)}}})]),s._v(" "),e("media-upload",{on:{change:s.onMediaUploadChange}}),s._v(" "),e("div",[e("span",{staticClass:"ks-word ks-fl"},[s._v("回答是否公开")]),s._v(" "),e("ks-switch",{staticClass:"ks-fl",model:{value:s.social.is_open,callback:function(t){s.$set(s.social,"is_open",t)},expression:"social.is_open"}})],1),s._v(" "),e("div",{staticClass:"ks-word--lightgray ks-pt10"},[s._v("若不公开，则学生需要成为付费会员才能查看回答")]),s._v(" "),e("ks-button",{staticClass:"ks-mt30",attrs:{type:"primary",width:"100%"},on:{click:function(t){return s.publishh()}}},[s._v("发表")])],1)]):s._e()},staticRenderFns:[]};var l=i("C7Lr")(n,c,!1,function(s){i("QObk")},"data-v-2fde9e5d",null);t.default=l.exports}});