webpackJsonp([29],{KYvX:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("lC5x"),a=s.n(i),r=s("J0Oq"),c=s.n(r),n=s("s1yA"),o=s("YzgO"),l=s.n(o),u={data:function(){return{flagStatus:2,show:!0,imgurl:"",select:0,isprice:1,coursetypes:"请选择",livetypes:"请选择",courseName:"",courseIntro:"",coursedel:"",cateID:0,chapterid:"",courseCates:"请选择",courseCatesid:0,multipleCourse:"",productPrice:"",priceDel:"",salesSet:"",coursedels:"",flag:!1,courseIDs:"",chapterTemplate:3,typeC:"",catelist:[]}},methods:{uploadImg:function(){var e=this;this.$store.ready(function(t){e.$uploadImages({wxid:t.info.wxid,uploaded:function(t){e.imgurl=t.defaultpic}})})},coursetype:function(){var e=this;this.$route.query.id||this.$actionSheet({list:[{name:"图文",type:"1"},{name:"视频",type:"2"},{name:"音频",type:"3"},{name:"直播",type:"4"}]}).then(function(t){e.coursetypes=t.name})},Livetype:function(){var e=this;this.$route.query.id||this.$actionSheet({list:[{name:"语音直播",type:"1"},{name:"一对一视频直播",type:"2"},{name:"小班视频直播",type:"3"},{name:"千人视频直播",type:"4"}]}).then(function(t){e.livetypes=t.name})},courseDel:function(){this.$router.push("/compile?type=1")},accomplish:function(){var e=this,t=this.imgurl,s=this.courseName,i=this.coursedel,a=this.coursetypes,r=(this.courseCates,this.select),c=this.isprice,o=this.multipleCourse,l=this.productPrice,u=this.priceDel,h=this.salesSet;if(!t)return this.$toast("请选择图片");if(""==s)return this.$toast("请输入课程名称");if(""==i)return this.$toast("请输入课程详情");if("请选择"==a)return this.$toast("请选择课程类型");if(1==r&&""==o)return this.$toast("请输入连载课时数");if(1==c){if(""==l)return this.$toast("请输入产品价格");if(""==u)return this.$toast("请输入划线价格");if(""==h)return this.$toast("请输入销量设置")}if((0==c||2==c)&&""==h)return this.$toast("请输入销量设置");var d=0;switch(this.coursetypes){case"视频":d=1;break;case"直播":d=2;break;case"音频":d=3;break;case"图文":d=4}var p="";switch(this.livetypes){case"一对一视频直播":p=1;break;case"小班视频直播":p=2;break;case"千人视频直播":p=3;break;case"语音直播":p=4}var v=this.$route.query.id;""==this.cateID?this.cateID=this.courseCatesid:this.cateID=this.cateID,this.coursedels=localStorage.getItem("courseContent");var g={courseid:v,courseType:d,livetype:p,title:this.courseName,categoryid:this.cateID,content:this.coursedels,defaultpic:this.imgurl,price:this.productPrice,price_market:this.priceDel,studentcount:this.salesSet,coursehour:this.select,chargetype:this.isprice,shortdesc:this.courseIntro,expecthour:this.multipleCourse,chapterTemplate:this.chapterTemplate,status:this.flagStatus};Object(n.a)(g).then(function(t){"success"==t.result&&(e.$toast("操作成功","success"),e.flag?e.flag&&0==e.select?e.$route.query.id?e.$router.push("/addcourse?id="+t.courseid+"&hoursid="+e.chapterid+"&courseHours="+e.select+"&courseType="+d):e.$router.push("/addcourse?id="+t.courseid+"&courseHours="+e.select+"&courseType="+d):e.$router.push("/manageCourse?id="+t.courseid):e.$router.push("/courseIndex"))})},getlist:function(){var e=this;return c()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.$route.query.id,t.next=3,Object(n.j)({courseid:s}).then(function(t){e.flagStatus=t.data.status,localStorage.setItem("courseContent",t.data.content),e.chapterid=t.chapterid,e.imgurl=t.data.defaultpic,e.courseIDs=t.data.courseid,e.courseName=t.data.title,e.chapterTemplate=t.data.chapterTemplate,e.courseIntro=t.data.shortdesc,t.data.content=t.data.content.replace(/\<\/?img[^>]+>/g,"[图片]"),t.data.content=t.data.content.replace(/\<\/?[^>]+>/g,""),t.data.content=t.data.content.replace(/&nbsp;/gi,"");var s=localStorage.getItem("flag"),i=localStorage.getItem("courseContent");e.coursedels=s?i:t.data.content,i=(i=(i=i.replace(/\<\/?img[^>]+>/g,"[图片]")).replace(/\<\/?[^>]+>/g,"")).replace(/&nbsp;/gi,""),localStorage.removeItem("flag"),e.coursedel=s?i:t.data.content,"1"==t.data.courseType?e.coursetypes="视频":"2"==t.data.courseType?e.coursetypes="直播":"3"==t.data.courseType?e.coursetypes="音频":"4"==t.data.courseType?e.coursetypes="图文":e.coursetypes="请选择",1==t.data.livetype?e.livetypes="一对一视频直播":2==t.data.livetype?e.livetypes="小班视频直播":3==t.data.livetype?e.livetypes="牛人视频直播":4==t.data.livetype?e.livetypes="语音直播":e.livetypes="请选择",e.courseCatesid=parseInt(t.data.categoryid),e.select=parseInt(t.data.coursehour),e.multipleCourse=t.data.expecthour,e.isprice=parseInt(t.data.chargetype),e.productPrice=t.data.price,e.priceDel=t.data.price_market,e.salesSet=t.data.studentcount});case 3:Object(n.b)().then(function(t){t.map(function(t){e.courseCatesid==t.categoryid?e.courseCates=t.categoryname:e.courseCatesid!=t.categoryid&&t.child&&t.child.map(function(s){e.courseCatesid==s.categoryid?e.courseCates=s.categoryname:e.courseCatesid!=t.categoryid&&s.child&&s.child.map(function(t){e.courseCatesid==t.categoryid&&(e.courseCates=t.categoryname)})})})});case 4:case"end":return t.stop()}},t,e)}))()},getCate:function(){var e=this,t=this;Object(n.b)().then(function(s){e.catelist=s,s.map(function(t){e.courseCatesid==t.categoryid?e.courseCates=t.categoryname:e.courseCatesid!=t.categoryid&&t.child&&t.child.map(function(s){e.courseCatesid==s.categoryid?e.courseCates=s.categoryname:e.courseCatesid!=t.categoryid&&s.child&&s.child.map(function(t){e.courseCatesid==t.categoryid&&(e.courseCates=t.categoryname)})})}),e.mobileSelect4=new l.a({trigger:"#trigger4",title:"课程分类",wheels:[{data:s}],keyMap:{id:"categoryid",value:"categoryname",childs:"child"},triggerDisplayData:!1,callback:function(e,s){t.courseCates=s[s.length-1].categoryname,t.cateID=s[s.length-1].categoryid}})})},getmsg:function(e){console.log(e)},isshow:function(){this.catelist==[]?this.$toast("暂时没有分类选择"):this.mobileSelect4.show()}},mounted:function(){var e=this;return c()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$route.query.id){t.next=3;break}return t.next=3,e.getlist();case 3:e.getCate();case 4:case"end":return t.stop()}},t,e)}))()},activated:function(){this.flag=!1},watch:{$route:{handler:function(e,t){if("newCourse"==this.$route.name){var s=localStorage.getItem("courseContent");s=(s=(s=s.replace(/\<\/?img[^>]+>/g,"[图片]")).replace(/\<\/?[^>]+>/g,"")).replace(/&nbsp;/gi,""),this.coursedel=s||"请输入"}if("newCourse"==this.$route.name){if("compile"==t.name)return;this.courseName="",this.cateID="",this.imgurl="",this.productPrice="",this.priceDel="",this.salesSet="",this.select="",this.isprice="",this.courseIntro="",this.multipleCourse="",this.courseCates="请选择",this.coursetypes="请选择",this.coursedel="",this.select=0,this.isprice=1,this.$route.query.id&&this.getlist()}}}}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page"},[i("div",{staticClass:"course"},[i("div",{staticClass:"course-cover"},[i("p",[e._v("课程封面")]),e._v(" "),i("div",{staticClass:"course-cover__image"},[i("ks-image",{attrs:{src:e.imgurl,alt:""}}),e._v(" "),i("ks-button",{staticClass:"ks-btn",attrs:{type:"upload",width:"90px"},on:{click:e.uploadImg}},[e._v("点击上传")])],1),e._v(" "),i("div",{staticClass:"course-name"},[i("P",[e._v("课程名称")]),e._v(" "),i("div",{staticClass:"course-import"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.courseName,expression:"courseName"}],staticClass:"courseInput",attrs:{type:"text",placeholder:"请输入课程名称",maxlength:"30"},domProps:{value:e.courseName},on:{input:function(t){t.target.composing||(e.courseName=t.target.value)}}}),e._v(" "),i("span",[e._v(e._s(e.courseName.length)+"/30")])])],1),e._v(" "),i("div",{staticClass:"course-name"},[i("P",[e._v("课程介绍")]),e._v(" "),i("div",{staticClass:"course-import"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.courseIntro,expression:"courseIntro"}],staticClass:"courseInput",attrs:{type:"text",placeholder:"用于微信分享说明",maxlength:"45"},domProps:{value:e.courseIntro},on:{input:function(t){t.target.composing||(e.courseIntro=t.target.value)}}}),e._v(" "),i("span",[e._v(e._s(e.courseIntro.length)+"/45")])])],1)])]),e._v(" "),i("div",{staticClass:"course-del"},[i("ks-list",[i("ks-list-item",{attrs:{title:"课程详情"}},[i("div",{on:{click:e.courseDel}},[i("span",{class:"请输入"==e.coursedel||""==e.coursedel?"":"pitch pitchcourse"},[e._v(e._s(""==e.coursedel?"请输入":e.coursedel)+" \n            "),i("img",{staticClass:"course-del-right courseimg",attrs:{src:s("jIzx"),alt:""}})])])]),e._v(" "),i("ks-list-item",{attrs:{title:"课程类型"},on:{click:function(t){return e.coursetype()}}},[i("span",{class:["请选择"==e.coursetypes?"":"pitch",e.$route.query.id?"pitchs":""]},[e._v(e._s(e.coursetypes))]),e._v(" "),i("img",{staticClass:"course-del-right",attrs:{src:s("jIzx"),alt:""}})]),e._v(" "),"直播"==e.coursetypes?i("ks-list-item",{attrs:{title:"直播类型"},on:{click:function(t){return e.Livetype()}}},[i("span",{class:"请选择"==e.livetypes?"":"pitch"},[e._v(e._s(e.livetypes))]),e._v(" "),i("img",{staticClass:"course-del-right",attrs:{src:s("jIzx"),alt:""}})]):e._e(),e._v(" "),i("ks-list-item",{attrs:{title:"课程分类"}},[i("div",{staticClass:"courseCate"},[i("div",{ref:"trigger",class:"请选择"==e.courseCates?"":"pitch",attrs:{id:"trigger4"}}),e._v(" "),i("div",{on:{click:function(t){return e.isshow()}}},[e._v(e._s(e.courseCates))]),e._v(" "),i("img",{staticClass:"course-del-right",attrs:{src:s("jIzx"),alt:""}})])])],1),e._v(" "),i("div",{staticClass:"courseset"},[e._v("课时设置")]),e._v(" "),i("div",{staticClass:"courseset"},[void 0!=e.$route.query.id?i("div",[i("ks-radio",{attrs:{label:0,disable:void 0==e.$route.query.id||0!=e.select},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[e._v("单课时")]),e._v(" "),i("ks-radio",{attrs:{label:1,disable:void 0==e.$route.query.id||1!=e.select},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[e._v("连载课时")])],1):i("div",[i("ks-radio",{attrs:{label:0},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[e._v("单课时")]),e._v(" "),i("ks-radio",{attrs:{label:1},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[e._v("连载课时")])],1)]),e._v(" "),1==e.select?i("ks-list",[i("ks-list-item",{attrs:{title:"连载课时数"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.multipleCourse,expression:"multipleCourse"}],staticClass:"courseInput course-price__input",attrs:{type:"text",placeholder:"请输入"},domProps:{value:e.multipleCourse},on:{input:function(t){t.target.composing||(e.multipleCourse=t.target.value)}}})])],1):e._e()],1),e._v(" "),i("div",{staticClass:"course-price"},[i("div",{staticClass:"courseset"},[e._v("售卖价格")]),e._v(" "),i("div",{staticClass:"courseset"},[i("ks-radio",{attrs:{label:1},model:{value:e.isprice,callback:function(t){e.isprice=t},expression:"isprice"}},[e._v("收费")]),e._v(" "),i("ks-radio",{attrs:{label:2},model:{value:e.isprice,callback:function(t){e.isprice=t},expression:"isprice"}},[e._v("打赏")]),e._v(" "),i("ks-radio",{attrs:{label:0},model:{value:e.isprice,callback:function(t){e.isprice=t},expression:"isprice"}},[e._v("免费")])],1),e._v(" "),i("ks-list",[1==e.isprice?i("ks-list-item",{attrs:{title:"产品价格"}},[i("div",{staticClass:"course-import"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.productPrice,expression:"productPrice"}],staticClass:"courseInput course-price__input",attrs:{type:"text",placeholder:"请输入价格"},domProps:{value:e.productPrice},on:{input:function(t){t.target.composing||(e.productPrice=t.target.value)}}}),e._v("元\n        ")])]):e._e(),e._v(" "),1==e.isprice?i("ks-list-item",{attrs:{title:"划线价格"}},[i("div",{staticClass:"course-import"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.priceDel,expression:"priceDel"}],staticClass:"courseInput course-price__input",attrs:{type:"text",placeholder:"请输入价格(可不填)"},domProps:{value:e.priceDel},on:{input:function(t){t.target.composing||(e.priceDel=t.target.value)}}}),e._v("元\n        ")])]):e._e(),e._v(" "),i("ks-list-item",{attrs:{title:"销量设置"}},[i("div",{staticClass:"course-import"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.salesSet,expression:"salesSet"}],staticClass:"courseInput course-price__input sales",attrs:{type:"text",placeholder:"请输入人数，谨慎使用",maxlength:"6"},domProps:{value:e.salesSet},on:{input:function(t){t.target.composing||(e.salesSet=t.target.value)}}})])])],1)],1),e._v(" "),0==e.select?i("div",{staticClass:"couresbtn"},[i("ks-button",{attrs:{type:"success",width:"96%"},on:{click:function(t){e.flag=!0,e.accomplish()}}},[e._v("保存进入下一步")])],1):i("div",{staticClass:"couresbtn"},[i("ks-button",{attrs:{type:"white",width:"48%"},on:{click:function(t){return e.accomplish()}}},[e._v("完成")]),e._v(" "),i("ks-button",{attrs:{type:"success",width:"48%"},on:{click:function(t){e.flag=!0,e.accomplish()}}},[e._v("保存进入下一步")])],1)])},staticRenderFns:[]};var d=s("C7Lr")(u,h,!1,function(e){s("o+hy")},"data-v-4ad5e602",null);t.default=d.exports},YzgO:function(e,t,s){
/*!
 * pickerExtend.js
 */
!function(){function t(e,t){return e.getElementsByClassName(t)}function i(e){this.pickerExtend,this.wheelsData=e.wheels,this.jsonType=!1,this.cascadeJsonData=[],this.displayJson=[],this.curValue=[],this.curIndexArr=[],this.cascade=!1,this.startY,this.moveEndY,this.moveY,this.oldMoveY,this.offset=0,this.offsetSum=0,this.oversizeBorder,this.curDistance=[],this.clickStatus=!1,this.isPC=!0,this.config=e,this.standardDis=0,this.init(e)}s("cRCl"),i.prototype={constructor:i,init:function(e){var s=this;if(0==e.wheels[0].data.length)return console.error("pickerExtend has been successfully installed, but the data is empty and cannot be initialized."),!1;if(s.keyMap=e.keyMap?e.keyMap:{id:"id",value:"value",childs:"childs",recommend:"recommend"},s.checkDataType(),s.renderWheels(s.wheelsData,e.cancelBtnText,e.ensureBtnText),s.trigger=document.querySelector(e.trigger),!s.trigger)return console.error("pickerExtend has been successfully installed, but no trigger found on your page."),!1;if(s.wheel=t(s.pickerExtend,"wheel"),s.slider=t(s.pickerExtend,"selectContainer"),s.wheels=s.pickerExtend.querySelector(".wheels"),s.liHeight=s.pickerExtend.querySelector("li").offsetHeight,s.ensureBtn=s.pickerExtend.querySelector(".ensure"),s.cancelBtn=s.pickerExtend.querySelector(".cancel"),s.grayLayer=s.pickerExtend.querySelector(".grayLayer"),s.popUp=s.pickerExtend.querySelector(".content"),s.callback=e.callback||function(){},s.cancel=e.cancel||function(){},s.transitionEnd=e.transitionEnd||function(){},s.onShow=e.onShow||function(){},s.onHide=e.onHide||function(){},s.initPosition=e.position||[],s.titleText=e.title||"",s.connector=e.connector||" ",s.triggerDisplayData=void 0===e.triggerDisplayData||e.triggerDisplayData,s.trigger.style.cursor="pointer",s.setStyle(e),s.setFilxibleStyle(e.flexibleHeight),s.setTitle(s.titleText),s.checkIsPC(),s.checkCascade(),s.addListenerAll(),s.cascade&&s.initCascade(),s.initPosition.length<s.slider.length)for(var i=s.slider.length-s.initPosition.length,a=0;a<i;a++)s.initPosition.push(0);s.setCurDistance(s.initPosition),s.cancelBtn.addEventListener("click",function(){s.hide(),s.cancel(s.curIndexArr,s.curValue)}),s.ensureBtn.addEventListener("click",function(e){e.preventDefault(),s.hide(),s.liHeight||(s.liHeight=s.pickerExtend.querySelector("li").offsetHeight);for(var t="",i=0;i<s.wheel.length;i++)i==s.wheel.length-1?t+=s.getInnerHtml(i):t+=s.getInnerHtml(i)+s.connector;s.triggerDisplayData&&(s.trigger.innerHTML=t),s.curIndexArr=s.getIndexArr(),s.curValue=s.getCurValue(),s.callback(s.curIndexArr,s.curValue)}),s.trigger.addEventListener("click",function(){s.show()}),s.grayLayer.addEventListener("click",function(){s.hide(),s.cancel(s.curIndexArr,s.curValue)}),s.popUp.addEventListener("click",function(){event.stopPropagation()}),s.fixRowStyle()},setTitle:function(e){this.titleText=e,this.pickerExtend.querySelector(".title").innerHTML=this.titleText},setStyle:function(e){e.ensureBtnColor&&(this.ensureBtn.style.color=e.ensureBtnColor),e.cancelBtnColor&&(this.cancelBtn.style.color=e.cancelBtnColor),e.titleColor&&(this.title=this.pickerExtend.querySelector(".title"),this.title.style.color=e.titleColor),e.textColor&&(this.panel=this.pickerExtend.querySelector(".panel"),this.panel.style.color=e.textColor),e.titleBgColor&&(this.btnBar=this.pickerExtend.querySelector(".btnBar"),this.btnBar.style.backgroundColor=e.titleBgColor),e.bgColor&&(this.panel=this.pickerExtend.querySelector(".panel"),this.shadowMask=this.pickerExtend.querySelector(".shadowMask"),this.panel.style.backgroundColor=e.bgColor,this.shadowMask.style.background="linear-gradient(to bottom, "+e.bgColor+", rgba(255, 255, 255, 0), "+e.bgColor+")"),isNaN(e.maskOpacity)||(this.grayMask=this.pickerExtend.querySelector(".grayLayer"),this.grayMask.style.background="rgba(0, 0, 0, "+e.maskOpacity+")")},setFilxibleStyle:function(e){var t=e||40;this.pickerExtend.style.display="none";for(var s=this.pickerExtend.getElementsByTagName("li"),i=0;i<s.length;i++)s[i].style.height=t+"px",s[i].style.lineHeight=t+"px";this.liHeight=t,this.pickerExtend.getElementsByClassName("selectLine")[0].style.height=t+"px",this.pickerExtend.getElementsByClassName("selectLine")[0].style.top=2*t+"px",this.wheels.style.height=5*t+"px";for(i=0;i<this.wheel.length;i++)this.wheel[i].style.height=5*t+"px";this.pickerExtend.querySelector(".shadowMask").style.height=5*t+"px",this.pickerExtend.style.display="block"},checkIsPC:function(){var e=navigator.userAgent.toLowerCase(),t="ipad"==e.match(/ipad/i),s="iphone os"==e.match(/iphone os/i),i="midp"==e.match(/midp/i),a="rv:1.2.3.4"==e.match(/rv:1.2.3.4/i),r="ucweb"==e.match(/ucweb/i),c="android"==e.match(/android/i),n="windows ce"==e.match(/windows ce/i),o="windows mobile"==e.match(/windows mobile/i);(t||s||i||a||r||c||n||o)&&(this.isPC=!1)},show:function(){this.pickerExtend.classList.add("pickerExtend-show"),"function"==typeof this.onShow&&this.onShow(this)},hide:function(){this.pickerExtend.classList.remove("pickerExtend-show"),"function"==typeof this.onHide&&this.onHide(this)},renderWheels:function(e,t,s){var i=t||"取消",a=s||"确认";this.pickerExtend=document.createElement("div"),this.pickerExtend.className="pickerExtend",this.pickerExtend.innerHTML='<div class="grayLayer"></div><div class="content"><div class="btnBar"><div class="fixWidth"><div class="cancel">'+i+'</div><div class="title"></div><div class="ensure">'+a+'</div></div></div><div class="panel"><div class="fixWidth"><div class="wheels"></div><div class="selectLine"></div><div class="shadowMask"></div></div></div></div>',document.body.appendChild(this.pickerExtend);for(var r="",c=0;c<e.length;c++){if(r+='<div class="wheel"><ul class="selectContainer">',this.jsonType)for(var n=0;n<e[c].data.length;n++)r+='<li data-id="'+e[c].data[n][this.keyMap.id]+'">'+e[c].data[n][this.keyMap.value]+"</li>";else for(n=0;n<e[c].data.length;n++)r+='<li class="shsihi-first">'+e[c].data[n]+"</li>";r+="</ul></div>"}this.pickerExtend.querySelector(".wheels").innerHTML=r},addListenerAll:function(){for(var e=this,t=0;t<e.slider.length;t++)!function(t){e.addListenerWheel(e.wheel[t],t)}(t)},addListenerWheel:function(e,t){var s=this;e.addEventListener("touchstart",function(){s.touch(event,this.firstChild,t)},!1),e.addEventListener("touchend",function(){s.touch(event,this.firstChild,t)},!1),e.addEventListener("touchmove",function(){s.touch(event,this.firstChild,t)},!1),s.isPC&&(e.addEventListener("mousedown",function(){s.dragClick(event,this.firstChild,t)},!1),e.addEventListener("mousemove",function(){s.dragClick(event,this.firstChild,t)},!1),e.addEventListener("mouseup",function(){s.dragClick(event,this.firstChild,t)},!0))},checkDataType:function(){"object"==typeof this.wheelsData[0].data[0]&&(this.jsonType=!0)},checkCascade:function(){if(this.jsonType){for(var e=this.wheelsData[0].data,t=0;t<e.length;t++)if(this.keyMap.childs in e[t]&&e[t][this.keyMap.childs].length>0){this.cascade=!0,this.cascadeJsonData=this.wheelsData[0].data;break}}else this.cascade=!1},generateArrData:function(e){for(var t=[],s=this.keyMap.id,i=this.keyMap.value,a=this.keyMap.recommend,r=0;r<e.length;r++){var c={};c[s]=e[r][this.keyMap.id],c[i]=e[r][this.keyMap.value],c[a]=e[r][this.keyMap.recommend],t.push(c)}return t},initCascade:function(){this.displayJson.push(this.generateArrData(this.cascadeJsonData)),this.initPosition.length>0?(this.initDeepCount=0,this.initCheckArrDeep(this.cascadeJsonData[this.initPosition[0]])):this.checkArrDeep(this.cascadeJsonData[0]),this.reRenderWheels()},initCheckArrDeep:function(e){if(e&&this.keyMap.childs in e&&e[this.keyMap.childs].length>0){this.displayJson.push(this.generateArrData(e[this.keyMap.childs])),this.initDeepCount++;var t=e[this.keyMap.childs][this.initPosition[this.initDeepCount]];t?this.initCheckArrDeep(t):this.checkArrDeep(e[this.keyMap.childs][0])}},checkArrDeep:function(e){e&&this.keyMap.childs in e&&e[this.keyMap.childs].length>0&&(this.displayJson.push(this.generateArrData(e[this.keyMap.childs])),this.checkArrDeep(e[this.keyMap.childs][0]))},checkRange:function(e,t){for(var s,i=this.displayJson.length-1-e,a=0;a<i;a++)this.displayJson.pop();for(a=0;a<=e;a++)s=0==a?this.cascadeJsonData[t[0]]:s[this.keyMap.childs][t[a]];this.checkArrDeep(s),this.reRenderWheels(),this.fixRowStyle(),this.setCurDistance(this.resetPosition(e,t))},resetPosition:function(e,t){var s,i=t;if(this.slider.length>t.length){s=this.slider.length-t.length;for(var a=0;a<s;a++)i.push(0)}else if(this.slider.length<t.length){s=t.length-this.slider.length;for(a=0;a<s;a++)i.pop()}for(a=e+1;a<i.length;a++)i[a]=0;return i},reRenderWheels:function(){var e=this;if(e.wheel.length>e.displayJson.length)for(var t=e.wheel.length-e.displayJson.length,s=0;s<t;s++)e.wheels.removeChild(e.wheel[e.wheel.length-1]);for(s=0;s<e.displayJson.length;s++)!function(t){var s="";if(e.wheel[t]){for(var i=0;i<e.displayJson[t].length;i++)e.displayJson[t][i][e.keyMap.recommend]?s+='<li   data-id="'+e.displayJson[t][i][e.keyMap.id]+'"><span class="recommendSpan">荐</span>'+e.displayJson[t][i][e.keyMap.value]+"</li>":s+='<li   data-id="'+e.displayJson[t][i][e.keyMap.id]+'">'+e.displayJson[t][i][e.keyMap.value]+"</li>";e.slider[t].innerHTML=s,e.setFilxibleStyle(e.config.flexibleHeight)}else{var a=document.createElement("div");a.className="wheel",s='<ul class="selectContainer">';for(i=0;i<e.displayJson[t].length;i++)s+='<li  data-id="'+e.displayJson[t][i][e.keyMap.id]+'">'+e.displayJson[t][i][e.keyMap.value]+"</li>";s+="</ul>",a.innerHTML=s,e.addListenerWheel(a,t),e.wheels.appendChild(a),e.setFilxibleStyle(e.config.flexibleHeight)}}(s)},updateWheels:function(e){if(this.cascade){if(this.cascadeJsonData=e,this.displayJson=[],this.initCascade(),this.initPosition.length<this.slider.length)for(var t=this.slider.length-this.initPosition.length,s=0;s<t;s++)this.initPosition.push(0);this.setCurDistance(this.initPosition),this.fixRowStyle()}},updateWheel:function(e,t){var s="";if(this.cascade)return console.error("级联格式不支持updateWheel(),请使用updateWheels()更新整个数据源"),!1;if(this.jsonType){for(var i=0;i<t.length;i++)s+='<li data-id="'+t[i][this.keyMap.id]+'">'+t[i][this.keyMap.value]+"</li>";this.wheelsData[e]={data:t}}else{for(i=0;i<t.length;i++)s+="<li>"+t[i]+"</li>";this.wheelsData[e]=t}this.slider[e].innerHTML=s},fixRowStyle:function(){for(var e=(100/this.wheel.length).toFixed(2),t=0;t<this.wheel.length;t++)this.wheel[t].style.width=e+"%"},getIndex:function(e){return Math.round((2*this.liHeight-e)/this.liHeight)},getIndexArr:function(){for(var e=[],t=0;t<this.curDistance.length;t++)e.push(this.getIndex(this.curDistance[t]));return e},getCurValue:function(){var e=[],t=this.getIndexArr();if(this.cascade)for(var s=0;s<this.wheel.length;s++)e.push(this.displayJson[s][t[s]]);else if(this.jsonType)for(s=0;s<this.curDistance.length;s++)e.push(this.wheelsData[s].data[this.getIndex(this.curDistance[s])]);else for(s=0;s<this.curDistance.length;s++)e.push(this.getInnerHtml(s));return e},getValue:function(){return this.curValue},calcDistance:function(e){return 2*this.liHeight-e*this.liHeight},setCurDistance:function(e){for(var t=[],s=0;s<this.slider.length;s++)t.push(this.calcDistance(e[s])),this.movePosition(this.slider[s],t[s]);this.curDistance=t},fixPosition:function(e){return-(this.getIndex(e)-2)*this.liHeight},movePosition:function(e,t){e.style.webkitTransform="translate3d(0,"+t+"px, 0)",e.style.transform="translate3d(0,"+t+"px, 0)"},locatePosition:function(e,t){this.curDistance[e]=this.calcDistance(t),this.movePosition(this.slider[e],this.curDistance[e]),this.cascade&&this.checkRange(e,this.getIndexArr())},updateCurDistance:function(e,t){e.style.transform?this.curDistance[t]=parseInt(e.style.transform.split(",")[1]):this.curDistance[t]=parseInt(e.style.webkitTransform.split(",")[1])},getDistance:function(e){return e.style.transform?parseInt(e.style.transform.split(",")[1]):parseInt(e.style.webkitTransform.split(",")[1])},getInnerHtml:function(e){var t=this.getIndex(this.curDistance[e]);return this.slider[e].getElementsByTagName("li")[t].innerHTML},touch:function(e,t,s){var i=this;switch((e=e||window.event).type){case"touchstart":i.startY=e.touches[0].clientY,i.startY=parseInt(i.startY),i.standardDis=i.startY,i.oldMoveY=i.startY;break;case"touchend":if(i.moveEndY=parseInt(e.changedTouches[0].clientY),i.offsetSum=i.moveEndY-i.startY,i.oversizeBorder=-(t.getElementsByTagName("li").length-3)*i.liHeight,0==i.offsetSum){var a=parseInt((document.documentElement.clientHeight-i.moveEndY)/this.liHeight);if(2!=a){var r=a-2,c=i.curDistance[s]+r*i.liHeight;c<=2*i.liHeight&&c>=i.oversizeBorder&&(i.curDistance[s]=c,i.movePosition(t,i.curDistance[s]),i.transitionEnd(i.getIndexArr(),i.getCurValue()))}}else i.updateCurDistance(t,s),i.curDistance[s]=i.fixPosition(i.curDistance[s]),i.movePosition(t,i.curDistance[s]),i.curDistance[s]+i.offsetSum>2*i.liHeight?(i.curDistance[s]=2*i.liHeight,setTimeout(function(){i.movePosition(t,i.curDistance[s])},100)):i.curDistance[s]+i.offsetSum<i.oversizeBorder&&(i.curDistance[s]=i.oversizeBorder,setTimeout(function(){i.movePosition(t,i.curDistance[s])},100)),i.transitionEnd(i.getIndexArr(),i.getCurValue());i.cascade&&i.checkRange(s,i.getIndexArr());break;case"touchmove":if(e.preventDefault(),e.targetTouches.length>1||e.scale&&1!==e.scale)return;i.moveY=e.touches[0].clientY,i.offset=i.moveY-i.oldMoveY,i.offset=Math.abs(i.moveY-i.standardDis)>2*i.liHeight?5*i.offset:i.offset,i.updateCurDistance(t,s),i.curDistance[s]=i.curDistance[s]+i.offset,i.movePosition(t,i.curDistance[s]),i.oldMoveY=i.moveY}},dragClick:function(e,t,s){var i=this;switch((e=e||window.event).type){case"mousedown":i.startY=e.clientY,i.oldMoveY=i.startY,i.clickStatus=!0;break;case"mouseup":if(i.moveEndY=e.clientY,i.offsetSum=i.moveEndY-i.startY,i.oversizeBorder=-(t.getElementsByTagName("li").length-3)*i.liHeight,0==i.offsetSum){var a=parseInt((document.documentElement.clientHeight-i.moveEndY)/this.liHeight);if(2!=a){var r=a-2,c=i.curDistance[s]+r*i.liHeight;c<=2*i.liHeight&&c>=i.oversizeBorder&&(i.curDistance[s]=c,i.movePosition(t,i.curDistance[s]),i.transitionEnd(i.getIndexArr(),i.getCurValue()))}}else i.updateCurDistance(t,s),i.curDistance[s]=i.fixPosition(i.curDistance[s]),i.movePosition(t,i.curDistance[s]),i.curDistance[s]+i.offsetSum>2*i.liHeight?(i.curDistance[s]=2*i.liHeight,setTimeout(function(){i.movePosition(t,i.curDistance[s])},100)):i.curDistance[s]+i.offsetSum<i.oversizeBorder&&(i.curDistance[s]=i.oversizeBorder,setTimeout(function(){i.movePosition(t,i.curDistance[s])},100)),i.transitionEnd(i.getIndexArr(),i.getCurValue());i.clickStatus=!1,i.cascade&&i.checkRange(s,i.getIndexArr());break;case"mousemove":e.preventDefault(),i.clickStatus&&(i.moveY=e.clientY,i.offset=i.moveY-i.oldMoveY,i.updateCurDistance(t,s),i.curDistance[s]=i.curDistance[s]+i.offset,i.movePosition(t,i.curDistance[s]),i.oldMoveY=i.moveY)}}},e.exports=i}()},cRCl:function(e,t){},"o+hy":function(e,t){}});