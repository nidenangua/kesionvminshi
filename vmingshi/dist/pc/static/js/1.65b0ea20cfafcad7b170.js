webpackJsonp([1],{"3cXf":function(t,e,s){t.exports={default:s("q1bu"),__esModule:!0}},BPei:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("rVsN"),i=s.n(r),a=s("ZLEe"),o=s.n(a),n=s("3cXf"),c=s.n(n),u=s("0xDb"),l=s("Llv5"),p=s("h0S9"),d={name:"CourseList",filters:{handleLiveType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e="直播";switch(Number(t)){case 1:e="一对一";break;case 2:e="小班课";break;case 3:e="千人直播";break;case 4:e="语音直播"}return e}},data:function(){return{loaded:!1,pageCount:null,params:{act:"appCourse",callKeyName:"courseList",p:1,maxperpage:12},currentTopCategoryid:"0",currentCategoryid:"0",order:"1",list:[],categoryRelations:[],categoryList:[],childList:[],courseType:"0",courseTypes:[{courseType:"0",name:"不限"},{courseType:"1",name:"点播"},{courseType:"2",name:"直播"},{courseType:"3",name:"音频"},{courseType:"4",name:"图文"}]}},watch:{$route:{handler:function(){"CourseList"!==this.$route.name&&"LiveList"!==this.$route.name&&"ColumnList"!==this.$route.name||this.setCategoryRelation()},deep:!0}},activated:function(){var t=this;this.getCourseCategory().then(function(){t.setCategoryRelation()})},methods:{setCategoryRelation:function(){var t=this,e=this.$route.query.categoryid||"0";if(this.order=this.$route.query.order||"1",this.courseType=this.$route.query.courseType||this.$route.query.coursetype||"0",this.currentTopCategoryid=null,this.currentCategoryid=e,this.categoryRelations=[],""+e=="0")return this.childList=[],void this.getList();this.getCurCategoryRelation(e,this.categoryList,"[]",function(e){e.map(function(e,s){0===s&&(t.categoryRelations.push(e),t.currentTopCategoryid=e.categoryid,e.child?t.childList=e.child:t.childList=[])}),t.getList()})},getCurCategoryRelation:function(t,e,s,r){var i=this,a=void 0;if(e.map(function(e){e.categoryid==t&&(a=e)}),a){var o=JSON.parse(s);o.push(a),r(o)}else e.map(function(e){if(e.child){var a=JSON.parse(s);a.push(e),i.getCurCategoryRelation(t,e.child,c()(a),r)}})},filterList:function(t){var e=Object(u.a)(this.$route.query);o()(t).map(function(s){e[s]=t[s]}),this.$router.push({path:this.$route.path,query:e})},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loaded=!1,this.params.p=e;var s=this.$route.query.key||"";"CourseList"===this.$route.name?(this.params.act="appCourse",this.params.data={sql_or_like:{title:s}},0==this.courseType?this.params.data.courseType=[1,2,3,4]:2==this.courseType?this.params.data.courseType=2:this.params.data.courseType=this.courseType,2==this.$route.query.order&&(this.params.data.sql_order={studentcount:"desc"})):"ColumnList"===this.$route.name&&(this.params.act="appColumn",this.params.data={sql_or_like:{title:s}},2==this.$route.query.order&&(this.params.data.sql_order={studentcount:"desc"}));var r=this.$route.query;r.categoryid?this.params.data.categoryid=r.categoryid:this.params.data.categoryid=0,this.$showLoading(),Object(l.a)([this.params]).then(function(e){var s=e.courseList;t.pageCount=s.page.total_pages,t.list=s.list,t.loaded=!0,t.$hideLoading()})},open:function(t){"CourseList"===this.$route.name||"LiveList"===this.$route.name?this.$router.push({name:"CourseDetail",params:{id:t}}):"ColumnList"===this.$route.name&&this.$router.push({name:"ColumnDetail",params:{id:t}})},getCourseCategory:function(){var t=this;return new i.a(function(e){Object(p.a)({}).then(function(s){t.categoryList=s,e(s)})})}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ks-container",["CourseList"===t.$route.name?s("div",{staticClass:"course-nav"},[t.categoryList.length?s("div",{staticClass:"course-nav__relations"},[s("span",[s("a",{on:{click:function(e){return t.filterList({categoryid:0})}}},[t._v("\n            全部\n          ")])]),t._v(" "),t._l(t.categoryRelations,function(e,r){return s("span",{key:r},[s("i",{staticClass:"el-icon-arrow-right"}),t._v(" \n          "+t._s(e.categoryname)+"\n        ")])})],2):t._e(),t._v(" "),t.categoryList.length?s("div",{staticClass:"course-nav__category"},[s("div",{staticClass:"course-nav__title"},[t._v("\n            学习方向\n          ")]),t._v(" "),t._l(t.categoryList,function(e,r){return s("span",{key:r,class:{active:t.currentCategoryid==e.categoryid||t.currentTopCategoryid==e.categoryid},on:{click:function(s){return t.filterList({categoryid:e.categoryid})}}},[t._v(t._s(e.categoryname))])})],2):t._e(),t._v(" "),t.childList&&t.childList.length?s("div",{staticClass:"course-nav__category"},t._l(t.childList,function(e,r){return s("span",{key:r,class:{active2:t.currentCategoryid==e.categoryid},on:{click:function(s){return t.filterList({categoryid:e.categoryid})}}},[t._v(t._s(e.categoryname))])}),0):t._e(),t._v(" "),s("div",{staticClass:"course-nav__category",staticStyle:{"margin-top":"10px"}},[s("div",{staticClass:"course-nav__title"},[t._v("\n            类型\n          ")]),t._v(" "),t._l(t.courseTypes,function(e){return s("span",{key:e.courseType,class:{active:t.courseType==e.courseType},on:{click:function(s){return t.filterList({coursetype:e.courseType})}}},[t._v("\n            "+t._s(e.name)+"\n          ")])})],2)]):t._e()]),t._v(" "),t.loaded?s("ks-container",{staticClass:"course-list",attrs:{title:"CourseList"===t.$route.name?"全部课程":"ColumnList"===t.$route.name&&"专栏列表"}},["CourseList"===t.$route.name?s("div",{staticClass:"course-list__order",attrs:{slot:"title-right"},slot:"title-right"},[s("ul",[s("li",{class:1==t.order&&"active",on:{click:function(e){return t.filterList({order:1})}}},[t._v("最新")]),t._v(" "),s("li",{class:2==t.order&&"active",on:{click:function(e){return t.filterList({order:2})}}},[t._v("热门")])])]):t._e(),t._v(" "),s("el-row",{attrs:{gutter:30}},t._l(t.list,function(e,r){return s("el-col",{key:r,attrs:{span:6}},[s("div",{staticClass:"course-list__item",on:{click:function(s){return t.open(e.courseid||e.columnid)}}},[s("ks-image",{attrs:{src:e.defaultpic}},["CourseList"===t.$route.name?s("div",{staticClass:"course-list__item-shadow"},[2==e.courseType?s("span",{staticClass:"course-list__item-tag"},[t._v(t._s(t._f("handleLiveType")(e.livetype)))]):s("span",{staticClass:"course-list__item-tag"},[t._v(t._s((1==e.courseType?"视频":3==e.courseType&&"音频")||4==e.courseType&&"图文"||6==e.courseType&&"活动"))])]):"ColumnList"===t.$route.name?s("div",{staticClass:"course-list__item-shadow"},[s("span",{staticClass:"course-list__item-tag"},[t._v("专栏")])]):t._e()]),t._v(" "),s("div",{staticClass:"course-list__item-footer"},[s("div",{staticClass:"course-list__item-title",class:e.title.length<20&&"course-list__item-title--sp"},[t._v(t._s(e.title))]),t._v(" "),e.title.length<20?s("div",{staticClass:"course-list__item-desc"},[t._v(t._s(e.shortdesc))]):t._e(),t._v(" "),"ColumnList"===t.$route.name?s("div",{staticClass:"course-list__item-learn"},[t._v("已更新"+t._s(e.qs)+"期")]):s("div",{staticClass:"course-list__item-learn"},[t._v(t._s(e.soldnum)+" 人学过")]),t._v(" "),s("div",{staticClass:"course-list__item-price",class:1==e.chargetype&&"course-list__item-price--bold"},[t._v(t._s(e.price)),Number(e.price_market)>0&&1==e.chargetype?s("span",[t._v("¥"+t._s(e.price_market))]):t._e()])])],1)])}),1),t._v(" "),s("div",{attrs:{align:"center"}},[t.pageCount>0?s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.params.p,"page-count":t.pageCount},on:{"update:currentPage":function(e){return t.$set(t.params,"p",e)},"update:current-page":function(e){return t.$set(t.params,"p",e)},"current-change":t.getList}}):s("ks-empty",{attrs:{msg:"该分类暂无课程"}})],1)],1):t._e()],1)},staticRenderFns:[]};var y=s("C7Lr")(d,_,!1,function(t){s("uvTu")},"data-v-2d933ec4",null);e.default=y.exports},q1bu:function(t,e,s){var r=s("Rv9F"),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},uvTu:function(t,e){}});