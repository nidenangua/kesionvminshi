webpackJsonp([21],{F1kv:function(t,s){},Nrts:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("lC5x"),n=e.n(i),a=e("J0Oq"),c=e.n(a),r=e("vMJZ"),p=e("h0S9"),v={data:function(){return{vipprice:"",yhjprice:"",yhjId:"",vipId:"",value:"",index:0,paystatus:0,content:"",msg:{},discountList:[]}},methods:{changeTab:function(t){var s=this;return c()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 0==t&&(s.paystatus=0),1==t&&(s.paystatus=1),s.index=0,e.next=5,s.getmsg();case 5:s.msg.list&&s.msg.list.length&&(s.vipprice=s.msg.list[0].price,s.vipId=s.msg.list[0].id);case 6:case"end":return e.stop()}},e,s)}))()},getmsg:function(){var t=this;return c()(n.a.mark(function s(){var e;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(r.x)({type:t.paystatus});case 2:e=s.sent,t.content=0==t.paystatus?e.vip_content:e.svip_content,t.msg=e;case 5:case"end":return s.stop()}},s,t)}))()},getvip:function(t,s){this.vipId=s.id,this.index=t,this.vipprice=s.price,this.getDiscount()},getDiscount:function(){var t=this;return c()(n.a.mark(function s(){var e;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(r.p)({type:"3",price:t.vipprice});case 2:e=s.sent,t.discountList=e.list;case 4:case"end":return s.stop()}},s,t)}))()},coupon:function(t){var s=this;if(this.yhjId=t,this.discountList.map(function(e){if(e.id==t)return s.yhjprice=e.money}),!t)return this.yhjprice=0},buynow:function(){var t=this;return c()(n.a.mark(function s(){var e;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(p.h)({type:"16",id:t.vipId,couponid:t.yhjId});case 2:e=s.sent,console.log(e),t.$pay(e.qrcode,e.ordersn,t.getprice).then(function(){t.$router.go(0)});case 5:case"end":return s.stop()}},s,t)}))()}},computed:{getprice:function(){return(this.vipprice-this.yhjprice>=0?this.vipprice-this.yhjprice:0).toFixed(2)}},created:function(){var t=this;return c()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return document.title="升级会员",1==t.$route.query.type&&(t.paystatus="1"),s.next=4,t.getmsg();case 4:return t.msg.list&&t.msg.list.length&&(t.vipprice=t.msg.list[0].price,t.vipId=t.msg.list[0].id),s.next=7,t.getDiscount();case 7:case"end":return s.stop()}},s,t)}))()}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page"},[e("div",{staticClass:"myOrder-top"},[e("h1",{staticClass:"viptitle"},[t._v("我的订单")]),t._v(" "),e("div",{staticClass:"myOrder-top__box"},[e("div",{staticClass:"myOrder-top__tab"},[e("span",{class:{active:0==t.paystatus},on:{click:function(s){return t.changeTab(0)}}},[t._v("VIP套餐")]),t._v(" "),e("span",{class:{active:1==t.paystatus},on:{click:function(s){return t.changeTab(1)}}},[t._v("SVIP套餐")])])])]),t._v(" "),t.msg.list&&t.msg.list.length?e("div",[e("div",{staticClass:"vipcon"},[e("div",{staticClass:"vipcon-title"},[e("span",{staticClass:"vipcon-title__status"},[t._v("当前VIP开通状态：")]),t._v(" "),-1==t.msg.status?e("span",{staticClass:"vipcon-title__open"},[t._v("暂未开通")]):1==t.msg.status?e("span",{staticClass:"vipcon-title__open"},[t._v("已开通")]):e("span",{staticClass:"vipcon-title__open"},[t._v("已过期")]),t._v(" "),1==t.msg.status?e("span",{staticClass:"vipcon-title__time"},[e("span",[t._v("到期时间：")]),t._v(" "),e("span",{staticClass:"vipcon-title__open"},[t._v(t._s(t.msg.expiretime))])]):t._e()]),t._v(" "),e("div",{staticClass:"viptype"},[e("p",{staticClass:"viptype-title"},[t._v("选择套餐类型：")]),t._v(" "),e("div",{staticClass:"vipList"},t._l(t.msg.list,function(s,i){return e("div",{key:i,class:["viptype-list",t.index==i?"vipactive":""],on:{click:function(e){return t.getvip(i,s)}}},[e("div",{staticClass:"viptype-list__msg--time"},[t._v("\n                      "+t._s(s.time)+"\n                      "),0==s.timetype?e("span",[t._v("天")]):1==s.timetype?e("span",[t._v("个月")]):e("span",[t._v("年")])]),t._v(" "),e("div",{staticClass:"viptype-list__msg--price"},[t._v("￥"+t._s(s.price))]),t._v(" "),e("div",{staticClass:"viptype-list__msg--total"},[0==s.timetype?e("a",[t._v(t._s((s.price/s.time).toFixed(2))+"元/天")]):t._e(),t._v(" "),1==s.timetype?e("a",[t._v(t._s((s.price/s.time).toFixed(2))+"元/月")]):t._e(),t._v(" "),2==s.timetype?e("a",[t._v(t._s((s.price/(12*s.time)).toFixed(2))+"元/月")]):t._e()])])}),0)]),t._v(" "),e("div",{staticClass:"vip-yhj"},[e("span",[t._v("选择优惠券:")]),t._v(" "),e("span",{staticClass:"submit-price__msg"},[e("el-select",{attrs:{placeholder:"请选择优惠券",clearable:"","no-data-text":"无可用优惠券"},on:{change:t.coupon},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}},t._l(t.discountList,function(t,s){return e("el-option",{key:s.addtime,attrs:{label:t.title,value:t.id}})}),1)],1)]),t._v(" "),e("div",{staticClass:"vip-pay"},[e("span",[t._v("支付金额:")]),t._v(" "),e("span",{staticClass:"vip-pay__price"},[t._v("￥"+t._s(t.getprice))])]),t._v(" "),e("div",[e("button",{staticClass:"buynow",on:{click:t.buynow}},[t._v("立即购买")])])]),t._v(" "),e("div",{staticClass:"vipexplain"},[e("p",[t._v("会员权益说明：")]),t._v(" "),e("div",{domProps:{innerHTML:t._s(t.content)}})])]):e("ks-empty",{attrs:{msg:"当前没有会员卡信息"}})],1)},staticRenderFns:[]};var u=e("C7Lr")(v,o,!1,function(t){e("F1kv")},"data-v-81ff2284",null);s.default=u.exports}});